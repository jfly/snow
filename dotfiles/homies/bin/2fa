#!/usr/bin/env nix-shell
#!nix-shell -i bash -p python3 bash
#!nix-shell -I nixpkgs=https://github.com/NixOS/nixpkgs/archive/f3d0897be466aa09a37f6bf59e62c360c3f9a6cc.tar.gz

OPTIONS=$(2fa-cli)
SELECTED=$(picker-popup "$OPTIONS")

SELECTED_2FA=$(echo "$SELECTED" | grep -Eo "[0-9]+")

if [ -z "$SELECTED_2FA" ]; then
    exit 1
fi

echo -n "$SELECTED_2FA" | clipit
xdotool key --clearmodifiers ctrl+shift+v
